+function(){"use strict";function e(e){var t=e.getBoundingClientRect(),n=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,o=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return{top:t.top+n,left:t.left+o}}function t(){function e(){document.body.addEventListener("click",function(e){"zoom"===e.target.getAttribute("data-action")&&"IMG"===e.target.tagName&&t(e)})}function t(e){if(e.stopPropagation(),!(document.body.classList.contains("zoom-overlay-open")||e.target.width>=window.innerWidth-80)){if(e.metaKey||e.ctrlKey)return o();i({forceDispose:!0}),m=n(e.target),m.zoomImage(),r()}}function o(){window.open(event.target.getAttribute("data-original")||event.target.currentSrc||event.target.src,"_blank")}function i(e){e=e||{forceDispose:!1},m&&(m[e.forceDispose?"dispose":"close"](),s(),m=null)}function r(){window.addEventListener("scroll",a),document.addEventListener("click",l),document.addEventListener("keyup",d),document.addEventListener("touchstart",c)}function s(){window.removeEventListener("scroll",a),document.removeEventListener("keyup",d),document.removeEventListener("click",l),document.removeEventListener("touchstart",c)}function a(e){null===f&&(f=window.pageYOffset);var t=f-window.pageYOffset;Math.abs(t)>=40&&i()}function d(e){27==e.keyCode&&i()}function l(e){e.stopPropagation(),e.preventDefault(),i()}function c(e){p=e.touches[0].pageY,e.target.addEventListener("touchmove",u)}function u(e){Math.abs(e.touches[0].pageY-p)<=10||(i(),e.target.removeEventListener("touchmove",u))}var m=null,f=null,p=null;return{listen:e}}var n=function(){function t(){var e=document.createElement("img");e.onload=function(){a=Number(e.height),d=Number(e.width),n()},e.src=u.currentSrc||u.src}function n(){m=document.createElement("div"),m.className="zoom-img-wrap",m.style.position="absolute",m.style.top=e(u).top+"px",m.style.left=e(u).left+"px",f=u.cloneNode(),f.style.visibility="hidden",u.style.width=u.offsetWidth+"px",u.parentNode.replaceChild(f,u),document.body.appendChild(m),m.appendChild(u),u.classList.add("zoom-img"),u.setAttribute("data-action","zoom-out"),l=document.createElement("div"),l.className="zoom-overlay",document.body.appendChild(l),o(),i()}function o(){u.offsetWidth;var e=d,t=a,n=e/u.width,o=window.innerHeight-80,i=window.innerWidth-80,r=e/t,s=i/o;c=e<i&&t<o?n:r<s?o/t*n:i/e*n}function i(){u.offsetWidth;var t=e(u),n=window.pageYOffset,o=n+window.innerHeight/2,i=window.innerWidth/2,r=t.top+u.height/2,s=t.left+u.width/2,a=Math.round(o-r),d=Math.round(i-s),l="scale("+c+")",f="translate("+d+"px, "+a+"px) translateZ(0)";u.style.webkitTransform=l,u.style.msTransform=l,u.style.transform=l,m.style.webkitTransform=f,m.style.msTransform=f,m.style.transform=f,document.body.classList.add("zoom-overlay-open")}function r(){if(document.body.classList.remove("zoom-overlay-open"),document.body.classList.add("zoom-overlay-transitioning"),u.style.webkitTransform="",u.style.msTransform="",u.style.transform="",m.style.webkitTransform="",m.style.msTransform="",m.style.transform="",!1 in document.body.style)return s();u.addEventListener("transitionend",s),u.addEventListener("webkitTransitionEnd",s)}function s(){u.removeEventListener("transitionend",s),u.removeEventListener("webkitTransitionEnd",s),m&&m.parentNode&&(u.classList.remove("zoom-img"),u.style.width="",u.setAttribute("data-action","zoom"),f.parentNode.replaceChild(u,f),m.parentNode.removeChild(m),l.parentNode.removeChild(l),document.body.classList.remove("zoom-overlay-transitioning"))}var a=null,d=null,l=null,c=null,u=null,m=null,f=null;return function(e){return u=e,{zoomImage:t,close:r,dispose:s}}}();t().listen()}();
//# sourceMappingURL=/dist/zoom-vanilla.min.js.map
